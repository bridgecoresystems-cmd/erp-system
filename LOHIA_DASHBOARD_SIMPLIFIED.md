# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π Dashboard Lohia - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

Dashboard –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –Ω–∞ 96+ —Å—Ç–∞–Ω–∫–æ–≤.

## –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. **–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω - –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞**

–í–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–∞—è –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

- **‚Ññ** - –ù–æ–º–µ—Ä —Å—Ç–∞–Ω–∫–∞
- **–ò–º—è —Å—Ç–∞–Ω–∫–∞** - –ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Lohia ‚Ññ1")
- **–°—Ç–∞—Ç—É—Å** - –ü—Ä–æ—Å—Ç–æ–π, –†–∞–±–æ—Ç–∞–µ—Ç, –†–µ–º–æ–Ω—Ç, –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **–û–ø–µ—Ä–∞—Ç–æ—Ä** - –§–ò–û —Ç–µ–∫—É—â–µ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- **–ú–µ—Ç—Ä–∞–∂ (–º)** - –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–π –º–µ—Ç—Ä–∞–∂
- **–í—ã–∑–æ–≤ –º–∞—Å—Ç–µ—Ä–∞** - –ê–∫—Ç–∏–≤–µ–Ω –∏–ª–∏ –Ω–µ—Ç
- **–ú–∞—Å—Ç–µ—Ä** - –§–ò–û –º–∞—Å—Ç–µ—Ä–∞, –µ—Å–ª–∏ –≤—ã–∑–æ–≤ –∞–∫—Ç–∏–≤–µ–Ω

### 2. **–£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã**

- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã: 12px
- –î–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ: 12px
- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: 12px
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

### 3. **–£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã**

- ‚ùå –ì—Ä–∞—Ñ–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤ –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚ùå –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚ùå –ê–∫—Ç–∏–≤–Ω–∞—è —Å–º–µ–Ω–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏)
- ‚úÖ –¢–æ–ª—å–∫–æ —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ

### 4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**

- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ —á–µ—Ä–µ–∑ AJAX
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ WebSocket –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**

Dashboard –≥–æ—Ç–æ–≤ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é 96+ —Å—Ç–∞–Ω–∫–æ–≤:
- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. **factory_erp/lohia_monitor/views.py**
   - `DashboardView` - —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Å—Ç–∞–Ω–∫–∏
   - `dashboard_status_all_api()` - –Ω–æ–≤—ã–π API endpoint –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∞–Ω–∫–æ–≤

2. **factory_erp/templates/lohia_monitor/dashboard.html**
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –≤ –ø—Ä–æ—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É
   - –ù–æ–≤—ã–π JavaScript –¥–ª—è AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

3. **factory_erp/lohia_monitor/urls.py**
   - –î–æ–±–∞–≤–ª–µ–Ω URL: `/lohia/api/dashboard-status-all/`

4. **factory_erp/static/css/style.css**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ `.lohia-table-compact`

5. **factory_erp/factory_erp/settings.py**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Å—Å–∏—è–º–∏ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ —Å —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ë–î)

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ç–∞–Ω–∫–æ–≤

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è dashboard —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç–∞–Ω–∫–∞–º–∏:

```bash
cd /home/batyr/projects/erp-system/factory_erp
../venv/bin/python manage.py create_test_machines --count 10
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ç–∞–Ω–∫–æ–≤. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 96 –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏).

### –ü—Ä–æ—Å–º–æ—Ç—Ä dashboard

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:8000/lohia/dashboard/
```

### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

- üü¢ **–†–∞–±–æ—Ç–∞–µ—Ç** - –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
- ‚ö™ **–ü—Ä–æ—Å—Ç–æ–π** - —Å–µ—Ä—ã–π —Ü–≤–µ—Ç
- üü° **–†–µ–º–æ–Ω—Ç** - –∂–µ–ª—Ç—ã–π —Ü–≤–µ—Ç
- üî¥ **–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** - –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç

### –í—ã–∑–æ–≤ –º–∞—Å—Ç–µ—Ä–∞

- ‚úì **–ù–µ—Ç** - –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç (–≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ)
- ‚ö†Ô∏è **–î–∞** - –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç (–æ–∂–∏–¥–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–∞)
- üîß **–í —Ä–∞–±–æ—Ç–µ** - –∂–µ–ª—Ç—ã–π —Ü–≤–µ—Ç (–º–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–Ω–∫–∞

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∞–Ω–∫–∞:
- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
- –ì—Ä–∞—Ñ–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω
- –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü—Ä–∏–º–µ—Ä URL: `/lohia/machine/<id>/detail/`

### –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫

–î–ª—è 96 —Å—Ç–∞–Ω–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ:
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Å—Ç–∞–Ω–∫–∞
- –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (–ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ)
- –§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é –≤—ã–∑–æ–≤–æ–≤ –º–∞—Å—Ç–µ—Ä–∞
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º

## API Endpoints

### GET `/lohia/api/dashboard-status-all/`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç–∞–Ω–∫–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "machines": [
    {
      "machine_id": 1,
      "name": "Lohia ‚Ññ1",
      "status": "working",
      "operator": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
      "meters": 1234.56,
      "call_status": null,
      "master": null
    },
    ...
  ]
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—à–∏–Ω—ã:**
- `machine_id` - ID —Å—Ç–∞–Ω–∫–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `status` - idle/working/maintenance/stopped
- `operator` - –§–ò–û –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ null
- `meters` - –ú–µ—Ç—Ä–∞–∂ (float)
- `call_status` - pending/in_progress/null
- `master` - –§–ò–û –º–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ null

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

Dashboard –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∞–Ω–∫–æ–≤:
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- `select_related()` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏—Ö—Å—è —è—á–µ–µ–∫

## –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ImproperlyConfigured: session storage path

**–ü—Ä–æ–±–ª–µ–º–∞:** `/tmp/django_sessions` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ —Å —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π –Ω–∞ –ë–î —Å–µ—Å—Å–∏–∏ –≤ `settings.py`

```python
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
```

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—á–∏—Å—Ç–∫–∏ `/tmp`.

---

**–î–∞—Ç–∞:** 7 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** ERP System Development Team

