# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –õ–û–ì–ò–ö–ò –ú–ê–°–¢–ï–†–ê

## ‚ùó –ü—Ä–æ–±–ª–µ–º–∞
ESP32 –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ API endpoints (`/lohia/api/shift/start/`, `/lohia/api/shift/end/`), –Ω–æ –ª–æ–≥–∏–∫–∞ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å –≤ –æ–±—â–µ–º endpoint `/employees/api/rfid-scan/`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–ò–∑–º–µ–Ω–µ–Ω ESP32 –∫–æ–¥**
–¢–µ–ø–µ—Ä—å ESP32 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–π RFID endpoint –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö:

```cpp
// –ë—ã–ª–æ
if (isShiftActive) {
  sendShiftEndRequest(rfidUid);
} else {
  sendShiftStartRequest(rfidUid);
}

// –°—Ç–∞–ª–æ
sendRfidScanRequest(rfidUid);
```

### 2. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `sendRfidScanRequest`**
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `/employees/api/rfid-scan/` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```json
{
  "device_id": "LOHIA-001",
  "rfid_uid": "049178C92B0289"
}
```

### 3. **–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–∏**
Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –æ—Ç–¥–µ–ª—É:

- **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã** (–ª—é–±–æ–π –æ—Ç–¥–µ–ª –∫—Ä–æ–º–µ "–ú–µ—Ö–∞–Ω–∏–∫–∏"): –Ω–∞—á–∏–Ω–∞—é—Ç/–∑–∞–≤–µ—Ä—à–∞—é—Ç —Å–º–µ–Ω—É
- **–ú–∞—Å—Ç–µ—Ä–∞** (–æ—Ç–¥–µ–ª "–ú–µ—Ö–∞–Ω–∏–∫–∏"): –ø—Ä–∏–Ω–∏–º–∞—é—Ç/–∑–∞–≤–µ—Ä—à–∞—é—Ç –≤—ã–∑–æ–≤—ã –Ω–∞ —Ä–µ–º–æ–Ω—Ç

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –º–∞—Å—Ç–µ—Ä–∞

### –ö–æ–≥–¥–∞ –º–∞—Å—Ç–µ—Ä –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É:

1. **–ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤** (—Å—Ç–∞—Ç—É—Å 'pending'):
   - –í—ã–∑–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å 'in_progress'
   - –ú–∞—Å—Ç–µ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–∞ –≤—ã–∑–æ–≤
   - –§–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–µ–º–æ–Ω—Ç–∞

2. **–ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–º–æ–Ω—Ç** –º–∞—Å—Ç–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å 'in_progress'):
   - –†–µ–º–æ–Ω—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (—Å—Ç–∞—Ç—É—Å 'completed')
   - –§–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è —Ä–µ–º–æ–Ω—Ç–∞

3. **–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤**:
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üìã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π

1. **–û–ø–µ—Ä–∞—Ç–æ—Ä** –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É ‚Üí –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–º–µ–Ω–∞
2. **–û–ø–µ—Ä–∞—Ç–æ—Ä** –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤ –º–∞—Å—Ç–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å 'pending')
3. **–ú–∞—Å—Ç–µ—Ä** –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É ‚Üí —Ä–µ–º–æ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è (—Å—Ç–∞—Ç—É—Å 'in_progress')
4. **–ú–∞—Å—Ç–µ—Ä** –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É ‚Üí —Ä–µ–º–æ–Ω—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (—Å—Ç–∞—Ç—É—Å 'completed')
5. **–û–ø–µ—Ä–∞—Ç–æ—Ä** –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É ‚Üí —Å–º–µ–Ω–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

## üîç –û—Ç–ª–∞–¥–∫–∞ –≤ Serial Monitor

–ü—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ –∫–∞—Ä—Ç—ã –º–∞—Å—Ç–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```
üè∑Ô∏è RFID detected: 049178C92B0289
üìè RFID length: 14
üì° Sending RFID scan request...
üì§ Sending JSON: {"device_id":"LOHIA-001","rfid_uid":"049178C92B0289"}
üì° HTTP Response Code: 200
‚úÖ RFID scan response: {"success":true,"action":"maintenance_started","message":"–†–µ–º–æ–Ω—Ç –Ω–∞—á–∞—Ç –º–∞—Å—Ç–µ—Ä–æ–º –ú–∞—Å—Ç–µ—Ä–æ–≤ –ü–µ—Ç—Ä"}
üéØ Action: maintenance_started
üîß Maintenance started!
```

## üë§ –ú–∞—Å—Ç–µ—Ä –≤ —Å–∏—Å—Ç–µ–º–µ
- **–ò–º—è**: –ú–∞—Å—Ç–µ—Ä–æ–≤ –ü–µ—Ç—Ä
- **RFID**: `049178C92B0289`
- **–û—Ç–¥–µ–ª**: –ú–µ—Ö–∞–Ω–∏–∫–∏
