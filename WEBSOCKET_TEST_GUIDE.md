# üîå WebSocket Testing Guide - ERP System

## üéØ –°—Ç–∞—Ç—É—Å WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

‚úÖ **WebSocket –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞!**
- Django Channels –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ASGI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–æ
- WebSocket consumers —Å–æ–∑–¥–∞–Ω—ã
- URL routing –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ç–æ–≤—ã

## üöÄ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å WebSocket

### 1. üì± –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000/websocket-simple/**

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ "–¢–µ—Å—Ç Lohia", "–¢–µ—Å—Ç Employees", etc.
2. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥ –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

### 2. üîß –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000/websocket-test/**

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫–æ –≤—Å–µ–º"
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

## üìã WebSocket Endpoints

| Endpoint | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –§—É–Ω–∫—Ü–∏–∏ |
|----------|------------|---------|
| `/ws/lohia/machine1/` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω–∫–∞, –¥–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã, –ø—É–ª—å—Å—ã |
| `/ws/employees/` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ | –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è |
| `/ws/notifications/` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `/ws/security/` | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –°–æ–±—ã—Ç–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |

## üîç –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: WebSocket –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**: –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
3. **–ó–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
4. **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
5. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ**: –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç—å—Å—è

### ‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000
2. **404 –æ—à–∏–±–∫–∞**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL endpoints
3. **–ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **–¢–∞–π–º–∞—É—Ç—ã**: WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
Browser ‚Üí WebSocket ‚Üí Django Channels ‚Üí ASGI ‚Üí Consumers ‚Üí Database
```

### –§–∞–π–ª—ã:
- `factory_erp/asgi.py` - ASGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `factory_erp/routing.py` - WebSocket URL routing
- `factory_erp/consumers.py` - WebSocket consumers
- `templates/websocket_test.html` - –ü–æ–ª–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `websocket_simple_test.html` - –ü—Ä–æ—Å—Ç–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- `CHANNEL_LAYERS` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `InMemoryChannelLayer` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- `ASGI_APPLICATION` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `factory_erp.asgi.application`
- WebSocket URLs –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `/ws/`

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
2. **–ó–∞–º–µ–Ω–∞ AJAX –Ω–∞ WebSocket**
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –¥–ª—è production**
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
5. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API**

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
cd /home/batyr/projects/erp-system/factory_erp
source ../venv/bin/activate
python manage.py runserver 0.0.0.0:8000
```

### –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞:
```bash
pip install --find-links ~/projects/requirements --no-index channels daphne
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
–°–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫.

---

**üéâ –£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket!**
