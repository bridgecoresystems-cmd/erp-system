<!DOCTYPE html>
<html>
<head>
    <title>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É - ERP –°–∏—Å—Ç–µ–º–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% load static %}{% static 'css/style.css' %}">
</head>
<body class="login-page">
    <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <div class="card" style="max-width: 450px; width: 100%; margin: 50px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
            
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div style="text-align: center; margin-bottom: 30px;">
                <h1 style="margin: 0 0 10px 0; color: #333; font-size: 28px;">–í—Ö–æ–¥ –≤ ERP —Å–∏—Å—Ç–µ–º—É</h1>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
            {% if form.errors %}
                <div class="alert alert-error" style="margin-bottom: 20px;">
                    ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å
                </div>
            {% endif %}

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" style="margin-bottom: 20px;">
                        {% if message.tags == 'success' %}‚úÖ{% else %}‚ö†Ô∏è{% endif %} {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label class="form-label" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        üë§ –õ–æ–≥–∏–Ω
                    </label>
                    <input 
                        type="text" 
                        name="username" 
                        class="form-control" 
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω" 
                        required 
                        autofocus
                        style="padding: 15px; font-size: 16px;"
                        value="{{ form.username.value|default:'' }}"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        üîí –ü–∞—Ä–æ–ª—å
                    </label>
                    <div style="position: relative;">
                        <input 
                            type="password" 
                            name="password" 
                            id="passwordField" 
                            class="form-control" 
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" 
                            required
                            style="padding: 15px; font-size: 16px; width: 100%; padding-right: 40px;"
                        >
                        <span 
                            id="togglePassword" 
                            title="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 18px;"
                        >üëÅÔ∏è</span>
                    </div>
                </div>

                
                <!-- –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è -->
                <div class="form-group" style="margin-bottom: 25px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" name="remember_me" style="margin: 0;">
                        <span style="font-size: 14px; color: #666;">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
                    </label>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ -->
                <button type="submit" class="btn" style="width: 100%; padding: 15px; font-size: 16px; font-weight: 600;">
                    üöÄ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                </button>
            </form>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div style="margin-top: 25px; text-align: center; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                <p style="margin: 0; color: #666; font-size: 13px;">
                    <span style="font-weight: 500;">–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</span><br>
                    –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ –≤—Ö–æ–¥–æ–º –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
                </p>
            </div>
        </div>
    </div>

    <script>
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –ª–æ–≥–∏–Ω–∞
    document.addEventListener('DOMContentLoaded', function() {
        const usernameField = document.querySelector('input[name="username"]');
        if (usernameField && !usernameField.value) {
            usernameField.focus();
        }
        
        // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª—è
        const togglePassword = document.getElementById('togglePassword');
        const passwordField = document.getElementById('passwordField');
        
        togglePassword.addEventListener('click', function() {
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç–∏–ø –ø–æ–ª—è
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            
            // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É
            if (type === 'text') {
                togglePassword.textContent = 'üôà'; // –∑–∞–∫—Ä—ã—Ç—ã–µ –≥–ª–∞–∑–∞
                togglePassword.title = '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å';
            } else {
                togglePassword.textContent = 'üëÅÔ∏è'; // –æ—Ç–∫—Ä—ã—Ç—ã–µ –≥–ª–∞–∑–∞
                togglePassword.title = '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å';
            }
        });
    });

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
    {% if form.errors %}
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.querySelector('.card');
        card.style.animation = 'shake 0.5s ease-in-out';
    });

    // CSS –∞–Ω–∏–º–∞—Ü–∏—è shake
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);
    {% endif %}
    </script>
</body>
</html>